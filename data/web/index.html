<html>
	<head>
		<title>Welcome</title>
		<script src="jquery-1.3.2.min.js"></script>
		<script>
			function refreshGSM() {
				$.getJSON("/api/1.0/gsm/status",
					function(data){
						$("#gsm").text(data.strength);
				});
			}

			function refreshALL() {
				refreshGSM();
			}

			function deleteGPX(item) {
				alert('delete item ' + item);
			}

			function listGPX() {
				$.getJSON("/api/1.0/gpx/list",
					function(data){
						$("#gpxlist").empty();
						if (data.length > 0) {
							$.each(data, function(i,item){
								$("<li/>").append($("<a/>").attr('href','/api/1.0/gpx/item?item='+item).text(item)).append(' ').append($("<a/>").attr('href','#').click('deleteGPX('+item+')').text('Delete')).appendTo("#gpxlist");
							});
						} else {
							$("<li/>").text("No gpx traces found").appendTo("#gpxlist");
						}
					}
				)
			}

			$(document).ready(refreshALL());
		</script>
	</head>
	<body><p>Welcome to the web manager for the Neo Freerunner</p>
		<ul><li>GSM: <span id="gsm">getting info...</span></li>
			<li><a href="#refresh" onclick="refreshALL(); return false;">Refresh</a></li>
		</ul>

		<ul id="gpxlist">
		</ul>
		<a href="#" onclick="listGPX(); return false;">Load GPX List</a>
	</body>
</html>
